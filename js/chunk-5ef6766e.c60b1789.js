(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5ef6766e"],{2532:function(e,t,c){"use strict";var i=c("23e7"),o=c("5a34"),r=c("1d80"),a=c("ab13");i({target:"String",proto:!0,forced:!a("includes")},{includes:function(e){return!!~String(r(this)).indexOf(o(e),arguments.length>1?arguments[1]:void 0)}})},"5a34":function(e,t,c){var i=c("44e7");e.exports=function(e){if(i(e))throw TypeError("The method doesn't accept regular expressions");return e}},"70b6":function(e,t,c){"use strict";c.r(t);c("caad"),c("2532");var i=c("7a23"),o=Object(i["createVNode"])("div",{class:"loading-spinner-ripple"},[Object(i["createVNode"])("div",{class:"loading"},[Object(i["createVNode"])("div"),Object(i["createVNode"])("div")])],-1),r={class:"container py-5"},a={class:"row"},n={class:"col-lg-3"},s={class:"list-group rounded-0 mb-5"},d=Object(i["createTextVNode"])(" 所有商品 "),l=Object(i["createVNode"])("i",{class:"bi bi-chevron-right list-group-icon"},null,-1),u=Object(i["createVNode"])("i",{class:"bi bi-chevron-right list-group-icon"},null,-1),b={class:"col-lg-9"},p={class:"row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4"},g={class:"card card-product h-100"},f={class:"position-relative"},h={class:"card-product__img"},v={class:"overflow-hidden"},O={key:0,class:"bi bi-heart text-primary"},j={key:1,class:"bi bi-heart-fill text-primary"},m={key:0,class:"badge bg-success position-absolute top-0 p-2 rounded-0"},y={key:1,class:"badge bg-danger position-absolute top-0 p-2 rounded-0"},k={key:2,class:"badge bg-warning position-absolute top-0 p-2 rounded-0"},w={class:"card-body text-center"},N={class:"card-text mb-0"},V={class:"text-muted"},C={class:"card-title mb-0"},x={class:"card-text font-monospace fs-4 mb-0"},F={class:"text-muted"},B=Object(i["createVNode"])("i",{class:"bi bi-cart"},null,-1),L=Object(i["createTextVNode"])(" 加入購物車 ");function S(e,t,c,S,$,M){var T=Object(i["resolveComponent"])("Loading");return Object(i["openBlock"])(),Object(i["createBlock"])(i["Fragment"],null,[Object(i["createVNode"])(T,{active:$.isLoading},{default:Object(i["withCtx"])((function(){return[o]})),_:1},8,["active"]),Object(i["createVNode"])("div",r,[Object(i["createVNode"])("div",a,[Object(i["createVNode"])("div",n,[Object(i["createVNode"])("div",s,[Object(i["createVNode"])("a",{href:"#",class:["\n              list-group-item list-group-item-action\n              border-0\n              d-flex\n              justify-content-between\n              list-group-item--hover\n            ",{active:""===$.filterCategory}],"aria-current":"true",onClick:t[1]||(t[1]=Object(i["withModifiers"])((function(e){return $.filterCategory=""}),["prevent"]))},[d,l],2),(Object(i["openBlock"])(!0),Object(i["createBlock"])(i["Fragment"],null,Object(i["renderList"])($.categories,(function(e,t){return Object(i["openBlock"])(),Object(i["createBlock"])("a",{href:"#",class:["\n              list-group-item\n              d-flex\n              justify-content-between\n              list-group-item--hover\n            ",{active:$.filterCategory===e}],"aria-current":"true",key:t,onClick:Object(i["withModifiers"])((function(t){return $.filterCategory=e}),["prevent"])},[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e)+" ",1),u],10,["onClick"])})),128))])]),Object(i["createVNode"])("div",b,[Object(i["createVNode"])("div",p,[(Object(i["openBlock"])(!0),Object(i["createBlock"])(i["Fragment"],null,Object(i["renderList"])(M.filterCategories,(function(e){return Object(i["openBlock"])(),Object(i["createBlock"])("div",{class:"col",key:e.id,"data-aos":"zoom-in","data-aos-once":"true"},[Object(i["createVNode"])("div",g,[Object(i["createVNode"])("div",f,[Object(i["createVNode"])("div",h,[Object(i["createVNode"])("div",v,[Object(i["createVNode"])("img",{src:e.imageUrl,class:"card-img-top",alt:e.title},null,8,["src","alt"])]),Object(i["createVNode"])("a",{href:"#",class:"fs-5",onClick:Object(i["withModifiers"])((function(t){return M.addMyFavorite(e)}),["prevent"])},[$.myFavorite.includes(e.id)?(Object(i["openBlock"])(),Object(i["createBlock"])("i",j)):(Object(i["openBlock"])(),Object(i["createBlock"])("i",O))],8,["onClick"]),e.is_new?(Object(i["openBlock"])(),Object(i["createBlock"])("span",m," 新品 ")):e.is_hot?(Object(i["openBlock"])(),Object(i["createBlock"])("span",y," 熱銷品 ")):Object(i["createCommentVNode"])("",!0),e.is_hot&&e.is_new?(Object(i["openBlock"])(),Object(i["createBlock"])("span",k," 熱銷新品 ")):Object(i["createCommentVNode"])("",!0)]),Object(i["createVNode"])("div",w,[Object(i["createVNode"])("p",N,[Object(i["createVNode"])("small",V,Object(i["toDisplayString"])(e.category),1)]),Object(i["createVNode"])("h5",C,Object(i["toDisplayString"])(e.title),1),Object(i["createVNode"])("p",x,[Object(i["createVNode"])("small",F," $ "+Object(i["toDisplayString"])(e.price),1)])]),Object(i["createVNode"])("a",{href:"#",class:"stretched-link",onClick:Object(i["withModifiers"])((function(t){return M.goDetail(e)}),["prevent"])},null,8,["onClick"])]),Object(i["createVNode"])("button",{type:"button",class:"btn btn-primary text-white rounded-0 py-2",onClick:function(t){return M.addCart(e.id)},disabled:0===e.storageNum,style:{position:"relative"}},[B,L],8,["onClick","disabled"])])])})),128))])])])])],64)}var $=c("2909"),M=(c("b0c0"),c("99af"),c("d3b7"),c("6062"),c("3ca3"),c("ddb0"),c("159b"),c("a434"),c("4de4"),c("ac1f"),c("466d"),c("fc60")),T={data:function(){return{products:[],categories:[],filterCategory:"",isLoading:!1,pageTitle:"",myFavorite:Object(M["a"])()||[]}},inject:["emitter"],mounted:function(){var e=this;this.pageTitle=this.$route.name,this.emitter.emit("page-title",this.pageTitle),this.isLoading=!0,setTimeout((function(){e.isLoading=!1}),2500),this.emitter.on("send-removeFavorite",(function(){e.getFavorite()})),this.getProducts(),this.getFavorite()},unmounted:function(){var e=this;this.emitter.off("send-removeFavorite",(function(){e.getFavorite()}))},watch:{propsProducts:function(){this.products=this.propsProducts},propsCategories:function(){this.categories=this.propsCategories},myFavorite:{handler:function(){Object(M["b"])(this.myFavorite)},deep:!0}},methods:{getProducts:function(){var e=this;this.isLoading=!0;var t="".concat("https://vue3-course-api.hexschool.io","/api/").concat("larry","/products/all");this.$http.get(t).then((function(t){t.data.success?(e.products=t.data.products,e.getCategories(),e.isLoading=!1):(e.$swal({title:t.data.message,icon:"error"}),e.isLoading=!1)})).catch((function(t){e.$swal({icon:"error",title:"Oops...",text:"Something went wrong!",footer:t})}))},getCategories:function(){var e=new Set;this.products.forEach((function(t){return e.add(t.category)})),this.categories=Object($["a"])(e)},getFavorite:function(){this.myFavorite=Object(M["a"])()||[]},addMyFavorite:function(e){this.myFavorite.includes(e.id)?(this.myFavorite.splice(this.myFavorite.indexOf(e.id),1),Object(M["b"])(this.myFavorite),this.$swal({icon:"warning",title:"已移除最愛"})):(this.myFavorite.push(e.id),Object(M["b"])(this.myFavorite),this.$swal({icon:"success",title:"加入成功！"})),this.emitter.emit("get-favorite")},goDetail:function(e){this.$router.push("/products/product/".concat(e.id))},addCart:function(e){var t=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.isLoading=!0;var i="".concat("https://vue3-course-api.hexschool.io","/api/").concat("larry","/cart"),o={product_id:e,qty:c};this.$http.post(i,{data:o}).then((function(e){e.data.success?(t.emitter.emit("update-cart"),t.$swal({title:e.data.message,icon:"success"}),t.isLoading=!1):(t.$swal({title:e.data.message,icon:"error"}),t.isLoading=!1)})).catch((function(e){t.$swal({icon:"error",title:"Oops...",text:"Something went wrong!",footer:e})}))}},computed:{filterCategories:function(){var e=this;return this.filterCategory?this.products.filter((function(t){return t.category.match(e.filterCategory)})):this.products}}};c("e4d9");T.render=S;t["default"]=T},a434:function(e,t,c){"use strict";var i=c("23e7"),o=c("23cb"),r=c("a691"),a=c("50c4"),n=c("7b0b"),s=c("65f0"),d=c("8418"),l=c("1dde"),u=l("splice"),b=Math.max,p=Math.min,g=9007199254740991,f="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!u},{splice:function(e,t){var c,i,l,u,h,v,O=n(this),j=a(O.length),m=o(e,j),y=arguments.length;if(0===y?c=i=0:1===y?(c=0,i=j-m):(c=y-2,i=p(b(r(t),0),j-m)),j+c-i>g)throw TypeError(f);for(l=s(O,i),u=0;u<i;u++)h=m+u,h in O&&d(l,u,O[h]);if(l.length=i,c<i){for(u=m;u<j-i;u++)h=u+i,v=u+c,h in O?O[v]=O[h]:delete O[v];for(u=j;u>j-i+c;u--)delete O[u-1]}else if(c>i)for(u=j-i;u>m;u--)h=u+i-1,v=u+c-1,h in O?O[v]=O[h]:delete O[v];for(u=0;u<c;u++)O[u+m]=arguments[u+2];return O.length=j-i+c,l}})},ab13:function(e,t,c){var i=c("b622"),o=i("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(c){try{return t[o]=!1,"/./"[e](t)}catch(i){}}return!1}},caad:function(e,t,c){"use strict";var i=c("23e7"),o=c("4d64").includes,r=c("44d2");i({target:"Array",proto:!0},{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),r("includes")},e4d9:function(e,t,c){"use strict";c("f31c")},f31c:function(e,t,c){},fc60:function(e,t,c){"use strict";function i(e){var t=JSON.stringify(e);localStorage.setItem("MyFavorite",t)}function o(){return JSON.parse(localStorage.getItem("MyFavorite"))}c.d(t,"b",(function(){return i})),c.d(t,"a",(function(){return o}))}}]);
//# sourceMappingURL=chunk-5ef6766e.c60b1789.js.map