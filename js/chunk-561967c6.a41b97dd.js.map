{"version":3,"sources":["webpack:///./src/views/fronted/Blog.vue?ef4e","webpack:///./src/views/fronted/Blog.vue","webpack:///./src/views/fronted/Blog.vue?0c00"],"names":["class","active","isLoading","article","title","author","Date","create_at","toLocaleDateString","tag","index","key","src","imageUrl","alt","description","type","placeholder","searchArticles","filterArticles","item","id","href","goToPage","data","articles","watch","$route","this","params","browserRule","test","navigator","userAgent","window","onpageshow","event","persisted","location","reload","getArticle","created","getArticles","methods","url","$http","get","then","res","success","name","$swal","message","icon","catch","err","text","footer","page","filterAry","forEach","push","Set","$router","computed","searchArticle","filter","match","render","__scopeId"],"mappings":"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","file":"js/chunk-561967c6.a41b97dd.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Blog.vue?vue&type=style&index=0&id=7bb26c09&lang=scss&scoped=true\"","<template>\n  <Loading :active=\"isLoading\">\n    <div class=\"loading-spinner-ripple\">\n      <div class=\"loading\">\n        <div></div>\n        <div></div>\n      </div>\n    </div>\n  </Loading>\n  <div class=\"container py-5\">\n    <div class=\"row\">\n      <div class=\"col-md-8\">\n        <h2 class=\"fw-bold\">{{ article.title }}</h2>\n        <ul class=\"d-flex list-unstyled\">\n          <li class=\"text-muted me-3\">\n            作者：{{ article.author }}\n          </li>\n          <li class=\"text-muted me-3\">\n            日期：{{ new Date(article.create_at * 1000).toLocaleDateString() }}\n          </li>\n          <li class=\"text-muted\">\n            tag：\n            <span class=\"badge me-2\"\n              v-for=\"(tag, index) in article.tag\"\n              :key=\"index\"\n              :class=\"[{ 'bg-primary': tag === '新款' },\n                { 'bg-warning': tag === '友誼' },\n                { 'bg-secondary': tag === '鮮豔' },\n                { 'bg-success': tag === '生活' }]\"\n            >\n              {{ tag }}\n            </span>\n          </li>\n        </ul>\n        <img\n          :src=\"article.imageUrl\"\n          :alt=\"article.title\"\n          class=\"img-fluid mb-3\"\n        >\n        <p class=\"text-muted\" v-html=\"article.description\"></p>\n      </div>\n      <div class=\"col-md-4 py-3 bg-light\">\n        <div class=\"input-group mb-4 w-100\">\n          <input\n            type=\"search\"\n            class=\"form-control\"\n            placeholder=\"找文章 ...\"\n            v-model=\"searchArticles\"\n          >\n        </div>\n        <div class=\"list-group rounded-0\">\n          <h2\n            class=\"\n              text-center\n              border-bottom border-3 border-primary\n              pb-2\n              mb-0\n              h4\n            \"\n          >\n            最新資訊\n          </h2>\n          <div\n            class=\"card mb-3\"\n            v-for=\"(item, index) in filterArticles\"\n            :key=\"index\"\n          >\n            <img\n              :src=\"item.imageUrl\"\n              class=\"card-img-top\"\n              :alt=\"item.id\"\n            >\n            <div class=\"card-body\">\n              <h5 class=\"card-title\">{{ item.title }}</h5>\n              <p class=\"card-text ellipsis\" v-html=\"item.description\"></p>\n              <p class=\"card-text\">\n                <a\n                  href=\"#\"\n                  class=\"stretched-link text-primary h6\"\n                  @click.prevent=\"goToPage(item.id)\"\n                >\n                  more...\n                </a>\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      articles: [],\n      article: {},\n      id: '',\n      isLoading: false,\n      filterArticles: [],\n      searchArticles: '',\n    };\n  },\n  watch: {\n    // * 監聽 $router id 值變化後，使用 $router.go(0) 重新刷新頁面\n    //  * safari使用$router.go(0)無效，嘗試使用window.history.go(0)\n    $route() {\n      this.id = this.$route.params.id;\n      const browserRule = /^.((iPhone)|(iPad)|(Safari))+.$/;\n      if (browserRule.test(navigator.userAgent)) {\n        window.onpageshow = (event) => {\n          if (event.persisted) {\n            window.location.reload();\n          }\n        };\n      }\n      this.getArticle();\n    },\n  },\n  created() {\n    const { id } = this.$route.params;\n    this.id = id;\n    this.getArticle();\n    this.getArticles();\n  },\n  methods: {\n    getArticle() {\n      const url = `${process.env.VUE_APP_URL}/api/${process.env.VUE_APP_PATH}/article/${this.id}`;\n      this.isLoading = true;\n      this.$http.get(url).then((res) => {\n        if (res.data.success) {\n          this.article = res.data.article;\n          this.isLoading = false;\n        } else if (this.$route.name === 'Blog') {\n          this.$swal({\n            title: res.data.message,\n            icon: 'error',\n          });\n          this.isLoading = false;\n        }\n      }).catch((err) => {\n        this.$swal({\n          icon: 'error',\n          title: 'Oops...',\n          text: 'Something went wrong!',\n          footer: err,\n        });\n      });\n    },\n    getArticles(page = 1) {\n      const url = `${process.env.VUE_APP_URL}/api/${process.env.VUE_APP_PATH}/articles?${page}`;\n      this.isLoading = true;\n      this.$http.get(url).then((res) => {\n        if (res.data.success) {\n          this.articles = res.data.articles;\n\n          const filterAry = [];\n          this.articles.forEach((item) => {\n            if (item.id !== this.id) {\n              filterAry.push(item);\n              this.filterArticles = [...new Set(filterAry)];\n            }\n          });\n\n          this.isLoading = false;\n        } else {\n          this.$swal({\n            title: res.data.message,\n            icon: 'error',\n          });\n          this.isLoading = false;\n        }\n      }).catch((err) => {\n        this.$swal({\n          icon: 'error',\n          title: 'Oops...',\n          text: 'Something went wrong!',\n          footer: err,\n        });\n      });\n    },\n    goToPage(id) {\n      this.$router.push(`/blogs/blog/${id}`);\n      this.getArticles();\n    },\n  },\n  computed: {\n    searchArticle() {\n      if (this.searchArticles) {\n        return this.articles.filter((item) => item.title.match(this.searchArticles));\n      }\n      return this.filterArticles;\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n  .banner {\n    background-size: cover;\n    background-position: center center;\n    height: 400px;\n    @media (max-width: 768px) {\n      height: 300px;\n    }\n  }\n\n  .card {\n    transition: all .3s ease;\n    &:hover {\n      box-shadow: 1px 5px 10px gray;\n    }\n  }\n</style>\n","import { render } from \"./Blog.vue?vue&type=template&id=7bb26c09&scoped=true\"\nimport script from \"./Blog.vue?vue&type=script&lang=js\"\nexport * from \"./Blog.vue?vue&type=script&lang=js\"\n\nimport \"./Blog.vue?vue&type=style&index=0&id=7bb26c09&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-7bb26c09\"\n\nexport default script"],"sourceRoot":""}