(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ea166576"],{1799:function(e,t,c){"use strict";var a=c("7a23"),r={"aria-label":"Page navigation"},o={class:"pagination pagination-primary"};function n(e,t,c,n,d,l){return Object(a["openBlock"])(),Object(a["createBlock"])("nav",r,[Object(a["createVNode"])("ul",o,[Object(a["createVNode"])("li",{class:["page-item",{disabled:!c.page.has_pre}]},[Object(a["createVNode"])("a",{class:"page-link link-primary",href:"#",onClick:t[1]||(t[1]=Object(a["withModifiers"])((function(t){return e.$emit("get-page",c.page.current_page-1)}),["prevent"]))}," Previous ")],2),(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(c.page.total_pages,(function(t){return Object(a["openBlock"])(),Object(a["createBlock"])("li",{class:["page-item",{active:t===c.page.current_page}],key:t},[Object(a["createVNode"])("a",{class:"page-link link-primary",href:"#",onClick:Object(a["withModifiers"])((function(c){return e.$emit("get-page",t)}),["prevent"])},Object(a["toDisplayString"])(t),9,["onClick"])],2)})),128)),Object(a["createVNode"])("li",{class:["page-item",{disabled:!c.page.has_next}]},[Object(a["createVNode"])("a",{class:"page-link link-primary",href:"#",onClick:t[2]||(t[2]=Object(a["withModifiers"])((function(t){return e.$emit("get-page",c.page.current_page+1)}),["prevent"]))}," Next ")],2)])])}var d={props:["page"],emits:["get-page"]};c("c396");d.render=n;t["a"]=d},"6dfb":function(e,t,c){},b0c0:function(e,t,c){var a=c("83ab"),r=c("9bf2").f,o=Function.prototype,n=o.toString,d=/^\s*function ([^ (]*)/,l="name";a&&!(l in o)&&r(o,l,{configurable:!0,get:function(){try{return n.call(this).match(d)[1]}catch(e){return""}}})},c396:function(e,t,c){"use strict";c("6dfb")},da25:function(e,t,c){"use strict";c.r(t);var a=c("7a23"),r={class:"table-responsive"},o={class:"table"},n=Object(a["createVNode"])("thead",null,[Object(a["createVNode"])("tr",null,[Object(a["createVNode"])("th",{width:"10%"},"購買時間"),Object(a["createVNode"])("th",{width:"20%"},"訂單資訊"),Object(a["createVNode"])("th",{width:"25%"},"購買內容"),Object(a["createVNode"])("th",{width:"10%"},"應付金額"),Object(a["createVNode"])("th",{width:"10%"},"是否付款"),Object(a["createVNode"])("th")])],-1),d={class:"list-unstyled"},l={class:"form-check form-switch"},i={class:"btn-group"},s={class:"d-flex justify-content-center"};function b(e,t,c,b,u,O){var p=Object(a["resolveComponent"])("Loading"),j=Object(a["resolveComponent"])("Pagination"),g=Object(a["resolveComponent"])("OrderModal"),m=Object(a["resolveComponent"])("DelModal");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[Object(a["createVNode"])(p,{active:u.isLoading},null,8,["active"]),Object(a["createVNode"])("div",r,[Object(a["createVNode"])("table",o,[n,Object(a["createVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(u.orders,(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])("tr",{key:e.id},[Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(new Date(1e3*e.create_at).toLocaleDateString()),1),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(e.create_at)+" "+Object(a["toDisplayString"])(e.user.email),1),Object(a["createVNode"])("td",null,[Object(a["createVNode"])("ul",d,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.products,(function(e,t){return Object(a["openBlock"])(),Object(a["createBlock"])("li",{key:t},Object(a["toDisplayString"])(e.product.title)+" 數量："+Object(a["toDisplayString"])(e.qty)+" "+Object(a["toDisplayString"])(e.product.unit),1)})),128))])]),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(e.total),1),Object(a["createVNode"])("td",null,[Object(a["createVNode"])("div",l,[Object(a["withDirectives"])(Object(a["createVNode"])("input",{class:"form-check-input",type:"checkbox",id:e.id,onChange:function(t){return O.updatePaid(e)},"onUpdate:modelValue":function(t){return e.is_paid=t},checked:e.is_paid},null,40,["id","onChange","onUpdate:modelValue","checked"]),[[a["vModelCheckbox"],e.is_paid]]),Object(a["createVNode"])("label",{class:"form-check-label",for:e.id},[Object(a["createVNode"])("span",{class:[{"text-success":e.is_paid},{"text-danger":!e.is_paid}]},Object(a["toDisplayString"])(e.is_paid?"已付款":"未付款"),3)],8,["for"])])]),Object(a["createVNode"])("td",null,[Object(a["createVNode"])("div",i,[Object(a["createVNode"])("button",{type:"button",class:"btn btn-sm btn-outline-primary",onClick:function(t){return O.openModal("edit",e)}}," 檢視 ",8,["onClick"]),Object(a["createVNode"])("button",{type:"button",class:"btn btn-sm btn-outline-danger",onClick:function(t){return O.openModal("delete",e)}}," 刪除 ",8,["onClick"])])])])})),128))])]),Object(a["createVNode"])("div",s,[Object(a["createVNode"])(j,{page:u.pagination,onGetPage:O.getOrders},null,8,["page","onGetPage"])])]),Object(a["createVNode"])(g,{ref:"orderModal",id:"orderModal",order:u.tempOrder},null,8,["order"]),Object(a["createVNode"])(m,{id:"delModal",ref:"delModal",item:u.tempOrder,onDelete:O.deleteOrder},null,8,["item","onDelete"])],64)}var u=c("5530"),O=(c("99af"),c("a15b"),c("b0c0"),{class:"modal",tabindex:"-1",id:"orderModal",ref:"orderModal"}),p={class:"modal-dialog modal-lg"},j={class:"modal-content"},g=Object(a["createVNode"])("div",{class:"modal-header bg-dark text-white"},[Object(a["createVNode"])("h5",{class:"modal-title bg-datk text-white"}," 訂單細節 "),Object(a["createVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),m={class:"modal-body"},h={class:"row"},V={class:"col-md-4"},N=Object(a["createVNode"])("h3",null,"用戶資料",-1),f={class:"table"},k={key:0},y=Object(a["createVNode"])("th",null,"姓名",-1),v=Object(a["createVNode"])("th",null,"Email",-1),D=Object(a["createVNode"])("th",null,"電話",-1),w=Object(a["createVNode"])("th",null,"地址",-1),M={class:"col-md-8"},B=Object(a["createVNode"])("h3",null,"訂單細節",-1),S={class:"table"},_=Object(a["createVNode"])("th",null,"訂單編號",-1),C=Object(a["createVNode"])("th",null,"下單時間",-1),x=Object(a["createVNode"])("th",null,"付款狀態",-1),L={key:0,class:"ms-3"},P=Object(a["createVNode"])("th",null,"總金額",-1),$=Object(a["createVNode"])("h3",null,"選購商品",-1),F={class:"table"},E=Object(a["createVNode"])("div",{class:"modal-footer"},[Object(a["createVNode"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," 關閉 ")],-1);function q(e,t,c,r,o,n){return Object(a["openBlock"])(),Object(a["createBlock"])("div",O,[Object(a["createVNode"])("div",p,[Object(a["createVNode"])("div",j,[g,Object(a["createVNode"])("div",m,[Object(a["createVNode"])("div",h,[Object(a["createVNode"])("div",V,[N,Object(a["createVNode"])("table",f,[o.tempOrder.user?(Object(a["openBlock"])(),Object(a["createBlock"])("tbody",k,[Object(a["createVNode"])("tr",null,[y,Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(o.tempOrder.user.name),1)]),Object(a["createVNode"])("tr",null,[v,Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(o.tempOrder.user.email),1)]),Object(a["createVNode"])("tr",null,[D,Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(o.tempOrder.user.tel),1)]),Object(a["createVNode"])("tr",null,[w,Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(o.tempOrder.user.address),1)])])):Object(a["createCommentVNode"])("",!0)])]),Object(a["createVNode"])("div",M,[B,Object(a["createVNode"])("table",S,[Object(a["createVNode"])("tbody",null,[Object(a["createVNode"])("tr",null,[_,Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(o.tempOrder.id),1)]),Object(a["createVNode"])("tr",null,[C,Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(new Date(1e3*o.tempOrder.create_at).toLocaleDateString()),1)]),Object(a["createVNode"])("tr",null,[x,Object(a["createVNode"])("td",null,[Object(a["createVNode"])("span",{class:[{"text-success":o.tempOrder.is_paid},{"text-danger":!o.tempOrder.is_paid}]},Object(a["toDisplayString"])(o.tempOrder.is_paid?"已付款":"未付款"),3),o.tempOrder.is_paid?(Object(a["openBlock"])(),Object(a["createBlock"])("span",L," 付款日期： "+Object(a["toDisplayString"])(o.tempOrder.paid_date?new Date(1e3*o.tempOrder.paid_date).toLocaleDateString():"補繳款，須查詢記帳紙本"),1)):Object(a["createCommentVNode"])("",!0)])]),Object(a["createVNode"])("tr",null,[P,Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(o.tempOrder.total),1)])])]),$,Object(a["createVNode"])("table",F,[Object(a["createVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(o.tempOrder.products,(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])("tr",{key:e.id},[Object(a["createVNode"])("th",null,Object(a["toDisplayString"])(e.product.title),1),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(e.qty)+" / "+Object(a["toDisplayString"])(e.product.unit),1)])})),128))])])])])]),E])])],512)}var G=c("7c2b"),J=c.n(G),U={props:["order"],data:function(){return{orderModal:{},tempOrder:{}}},mounted:function(){this.orderModal=new J.a(this.$refs.orderModal)},watch:{order:function(){this.tempOrder=this.order}},methods:{showModal:function(){this.orderModal.show()},closeModal:function(){this.orderModal.hide()}}};U.render=q;var z=U,A=c("6ff1"),H=c("1799"),I={data:function(){return{orders:[],buyDate:"",tempOrder:{},isEdit:!1,pagination:{},isLoading:!1,currentPage:""}},inject:["emitter"],components:{OrderModal:z,DelModal:A["a"],Pagination:H["a"]},created:function(){this.getOrders()},methods:{getOrders:function(e){var t=this;this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("larry","/admin/orders?page=").concat(e);this.$http.get(c).then((function(e){e.data.success?(t.orders=e.data.orders,t.pagination=e.data.pagination,t.currentPage=e.data.pagination.current_page,t.isLoading=!1):(t.emitter.emit("push-message",{style:"danger",title:"訂單取得失敗",content:e.data.message}),t.isLoading=!1)})).catch((function(e){console.log(e)}))},openModal:function(e,t){switch(e){case"edit":this.tempOrder=Object(u["a"])({},t),this.isEdit=!0,this.$refs.orderModal.showModal();break;case"delete":this.tempOrder=Object(u["a"])({},t),this.$refs.delModal.showModal();break;default:break}},updatePaid:function(e){var t=this,c={is_paid:e.is_paid},a="".concat("https://vue3-course-api.hexschool.io","/api/").concat("larry","/admin/order/").concat(e.id);this.$http.put(a,{data:c}).then((function(e){e.data.success?(t.getOrders(t.currentPage),t.emitter.emit("push-message",{style:"success",title:e.data.message})):t.emitter.emit("push-message",{style:"danger",title:"更新失敗",content:e.data.message.join("、")})})).catch((function(e){console.log(e)}))},deleteOrder:function(e){var t=this,c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("larry","/admin/order/").concat(e.id);this.$http.delete(c).then((function(e){e.data.success?(t.emitter.emit("push-message",{style:"success",title:e.data.message}),t.getOrders(t.currentPage),t.$refs.delModal.hideModal()):t.emitter.emit("push-message",{style:"danger",title:e.data.message})})).catch((function(e){t.$swal({icon:"error",title:"Oops...",text:"Something went wrong!",footer:e})}))}}};I.render=b;t["default"]=I}}]);
//# sourceMappingURL=chunk-ea166576.9e8fe000.js.map