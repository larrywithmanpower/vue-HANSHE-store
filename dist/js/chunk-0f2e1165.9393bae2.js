(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0f2e1165"],{"1dde":function(t,e,c){var o=c("d039"),a=c("b622"),n=c("2d00"),r=a("species");t.exports=function(t){return n>=51||!o((function(){var e=[],c=e.constructor={};return c[r]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"655a":function(t,e,c){"use strict";c.r(e);var o=c("7a23"),a=Object(o["createVNode"])("div",{class:"loadingio-spinner-ripple-i0ld0lo9l1"},[Object(o["createVNode"])("div",{class:"ldio-kc4k04s39o"},[Object(o["createVNode"])("div"),Object(o["createVNode"])("div")])],-1),n={key:0,class:"table-responsive mx-auto my-3"},r={class:"table table-sm table-borderless text-center border-light align-middle"},s=Object(o["createVNode"])("thead",{class:"bg-primary text-white"},[Object(o["createVNode"])("tr",{class:"py-3"},[Object(o["createVNode"])("th"),Object(o["createVNode"])("th",{class:"d-none d-md-block"}),Object(o["createVNode"])("th",null,"品名"),Object(o["createVNode"])("th",{width:"20%"},"數量"),Object(o["createVNode"])("th",{width:"20%"},"單價")])],-1),i={class:"border-bottom"},d=Object(o["createVNode"])("i",{class:"bi bi-x"},null,-1),l={class:"d-none d-md-block"},u={class:"fw-bold"},b={class:"input-group input-group-sm"},p={key:0},j=Object(o["createVNode"])("br",null,null,-1),O={class:"text-success"},h={key:1},f={colspan:"5",class:"py-4 px-3"},N={class:"row justify-content-between"},g={class:"col-md-6 mb-3 mb-md-0"},m={class:"btn-group w-100"},y={class:"col-md-6 d-flex justify-content-end"},V={class:"input-group"},v={key:1,class:"d-flex justify-content-center my-5"},k={class:"card",style:{width:"20rem"}},x={class:"card-body"},w=Object(o["createVNode"])("h5",{class:"card-title text-danger"},"購物車內無任何商品",-1),C=Object(o["createTextVNode"])("還不快去買"),$={class:"d-flex justify-content-end"},B={class:"card",style:{width:"18rem"}},T={class:"card-body lh-lg"},L=Object(o["createVNode"])("h5",{class:"card-title mb-4"},"小計",-1),D={class:"card-subtitle mb-4 text-muted d-flex justify-content-between"},S=Object(o["createTextVNode"])(" 商品總價 "),U={key:0,class:"card-subtitle mb-4 text-success d-flex justify-content-between"},_=Object(o["createTextVNode"])(" 優惠折扣 "),M=Object(o["createVNode"])("hr",null,null,-1),q={key:1,class:"text-muted d-flex justify-content-between"},A=Object(o["createTextVNode"])(" 總計 "),E={key:2,class:"text-muted d-flex justify-content-between"},F=Object(o["createTextVNode"])(" 總計 ");function I(t,e,c,I,J,z){var G=Object(o["resolveComponent"])("Loading"),H=Object(o["resolveComponent"])("router-link");return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[Object(o["createVNode"])(G,{active:J.isLoading},{default:Object(o["withCtx"])((function(){return[a]})),_:1},8,["active"]),J.carts.length>0?(Object(o["openBlock"])(),Object(o["createBlock"])("div",n,[Object(o["createVNode"])("table",r,[s,Object(o["createVNode"])("tbody",i,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(J.carts,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])("tr",{key:e.id},[Object(o["createVNode"])("td",null,[Object(o["createVNode"])("button",{class:"btn btn-sm btn-outline-danger",type:"button",onClick:function(t){return z.delCartItem(e.id)}},[d],8,["onClick"])]),Object(o["createVNode"])("td",l,[Object(o["createVNode"])("img",{class:"img-fluid",src:e.product.imageUrl,alt:e.id,style:{width:"180px",heigth:"180px"}},null,8,["src","alt"])]),Object(o["createVNode"])("td",null,[Object(o["createVNode"])("span",u,Object(o["toDisplayString"])(e.product.title),1)]),Object(o["createVNode"])("td",null,[Object(o["createVNode"])("div",b,[Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"number",class:"form-control text-center",min:"1","onUpdate:modelValue":function(t){return e.qty=t},onChange:function(t){return z.updateCart(e)}},null,40,["onUpdate:modelValue","onChange"]),[[o["vModelText"],e.qty,void 0,{number:!0}]])])]),Object(o["createVNode"])("td",null,[J.coupon.isUsed?(Object(o["openBlock"])(),Object(o["createBlock"])("span",p,[Object(o["createVNode"])("del",null," NT$ "+Object(o["toDisplayString"])(t.$toCurrency(e.total)),1),j,Object(o["createVNode"])("small",O,"折扣價：NT$ "+Object(o["toDisplayString"])(t.$toCurrency(Math.round(e.final_total))),1)])):(Object(o["openBlock"])(),Object(o["createBlock"])("span",h,"NT$ "+Object(o["toDisplayString"])(t.$toCurrency(e.total)),1))])])})),128)),Object(o["createVNode"])("tr",null,[Object(o["createVNode"])("td",f,[Object(o["createVNode"])("div",N,[Object(o["createVNode"])("div",g,[Object(o["createVNode"])("div",m,[Object(o["createVNode"])("button",{class:"btn btn-outline-primary",onClick:e[1]||(e[1]=function(e){return t.$router.push("/products/category")})}," 繼續選購 "),Object(o["withDirectives"])(Object(o["createVNode"])("button",{class:"btn btn-danger",role:"group",onClick:e[2]||(e[2]=function(t){return z.delAllCarts()})}," 清空購物車 ",512),[[o["vShow"],0!==J.carts.length]])])]),Object(o["createVNode"])("div",y,[Object(o["createVNode"])("div",V,[Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text",class:"form-control",placeholder:"輸入優惠碼","onUpdate:modelValue":e[3]||(e[3]=function(t){return J.coupon_code=t})},null,512),[[o["vModelText"],J.coupon_code,void 0,{trim:!0}]]),Object(o["createVNode"])("button",{class:"btn btn-outline-primary",type:"button",onClick:e[4]||(e[4]=function(){return z.addCouponCode&&z.addCouponCode.apply(z,arguments)})}," 加入優惠碼 ")])])])])])])])])):(Object(o["openBlock"])(),Object(o["createBlock"])("section",v,[Object(o["createVNode"])("div",k,[Object(o["createVNode"])("div",x,[w,Object(o["createVNode"])(H,{to:"/products/productList",class:"card-link stretched-link"},{default:Object(o["withCtx"])((function(){return[C]})),_:1})])])])),Object(o["createVNode"])("section",$,[Object(o["createVNode"])("div",B,[Object(o["createVNode"])("div",T,[L,Object(o["createVNode"])("h6",D,[S,Object(o["createVNode"])("span",null,"NT$ "+Object(o["toDisplayString"])(t.$toCurrency(J.total)),1)]),J.coupon.isUsed?(Object(o["openBlock"])(),Object(o["createBlock"])("h6",U,[_,Object(o["createVNode"])("span",null,"NT$ "+Object(o["toDisplayString"])(t.$toCurrency(Math.round(J.coupon.finalTotal))),1)])):Object(o["createCommentVNode"])("",!0),M,J.coupon.isUsed?(Object(o["openBlock"])(),Object(o["createBlock"])("p",q,[A,Object(o["createVNode"])("span",null,"NT$ "+Object(o["toDisplayString"])(t.$toCurrency(Math.round(J.coupon.finalTotal))),1)])):(Object(o["openBlock"])(),Object(o["createBlock"])("p",E,[F,Object(o["createVNode"])("span",null,"NT$ "+Object(o["toDisplayString"])(t.$toCurrency(J.total)),1)])),Object(o["createVNode"])("a",{href:"#",class:"btn btn-primary text-white w-100",onClick:e[5]||(e[5]=Object(o["withModifiers"])((function(e){return t.$router.push("/cart/cartOrder")}),["prevent"]))},"填寫訂單資訊")])])])],64)}c("99af");var J={inject:["emitter"],data:function(){return{isLoading:!1,carts:[],total:"",coupon_code:"",coupon:{isUsed:!1,finalTotal:"",total:""}}},created:function(){this.getCarts()},methods:{getCarts:function(){var t=this;this.isLoading=!0;var e="".concat("https://vue3-course-api.hexschool.io","/api/").concat("larry","/cart");this.$http.get(e).then((function(e){t.emitter.emit("update-cart"),t.carts=e.data.data.carts,t.total=e.data.data.total,t.isLoading=!1}))},updateCart:function(t){var e=this,c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("larry","/cart/").concat(t.id),o={product_id:t.id,qty:t.qty};this.isLoading=!0,this.$http.put(c,{data:o}).then((function(t){t.data.success&&(e.isLoading=!1,console.log(t.data.data.qty))})).catch((function(t){console.log(t)}))},delCartItem:function(t){var e=this;this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("larry","/cart/").concat(t);this.$http.delete(c).then((function(t){t.data.success?(e.emitter.emit("update-cart"),e.$swal({title:t.data.message,icon:"success"}),e.isLoading=!1,e.emitter.emit("update-cart"),e.getCarts()):e.$swal({title:t.data.message,icon:"error"})}))},delAllCarts:function(){var t=this;this.isLoading=!0;var e="".concat("https://vue3-course-api.hexschool.io","/api/").concat("larry","/carts");this.$http.delete(e).then((function(e){t.emitter.emit("update-cart"),e.data.success?(t.$swal({title:e.data.message,icon:"success"}),t.isLoading=!1,t.getCarts()):(t.$swal({title:e.data.message,icon:"error"}),t.isLoading=!1)}))},addCouponCode:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io","/api/").concat("larry","/coupon"),c={code:this.coupon_code};this.isLoading=!0,this.$http.post(e,{data:c}).then((function(e){e.data.success?(t.$swal({title:e.data.message,icon:"success"}),t.coupon.isUsed=!0,t.coupon.finalTotal=e.data.data.final_total,t.getCarts(),t.isLoading=!1):(t.$swal({title:e.data.message,icon:"error"}),t.isLoading=!1)})).catch((function(t){console.log(t)}))}}};c("825f");J.render=I;e["default"]=J},"825f":function(t,e,c){"use strict";c("b4a4")},8418:function(t,e,c){"use strict";var o=c("c04e"),a=c("9bf2"),n=c("5c6c");t.exports=function(t,e,c){var r=o(e);r in t?a.f(t,r,n(0,c)):t[r]=c}},"99af":function(t,e,c){"use strict";var o=c("23e7"),a=c("d039"),n=c("e8b5"),r=c("861d"),s=c("7b0b"),i=c("50c4"),d=c("8418"),l=c("65f0"),u=c("1dde"),b=c("b622"),p=c("2d00"),j=b("isConcatSpreadable"),O=9007199254740991,h="Maximum allowed index exceeded",f=p>=51||!a((function(){var t=[];return t[j]=!1,t.concat()[0]!==t})),N=u("concat"),g=function(t){if(!r(t))return!1;var e=t[j];return void 0!==e?!!e:n(t)},m=!f||!N;o({target:"Array",proto:!0,forced:m},{concat:function(t){var e,c,o,a,n,r=s(this),u=l(r,0),b=0;for(e=-1,o=arguments.length;e<o;e++)if(n=-1===e?r:arguments[e],g(n)){if(a=i(n.length),b+a>O)throw TypeError(h);for(c=0;c<a;c++,b++)c in n&&d(u,b,n[c])}else{if(b>=O)throw TypeError(h);d(u,b++,n)}return u.length=b,u}})},b4a4:function(t,e,c){}}]);
//# sourceMappingURL=chunk-0f2e1165.9393bae2.js.map