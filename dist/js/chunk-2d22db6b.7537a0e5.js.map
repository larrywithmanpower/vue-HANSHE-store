{"version":3,"sources":["webpack:///./src/views/admin/Article.vue","webpack:///./src/components/admin/ArticleModal.vue","webpack:///./src/components/admin/ArticleModal.vue?640d","webpack:///./src/components/admin/PreviewModal.vue","webpack:///./src/components/admin/PreviewModal.vue?9443","webpack:///./src/views/admin/Article.vue?c155"],"names":["class","width","active","isLoading","type","openModal","articles","article","key","id","title","href","ata-bs-toggle","data-bs-target","author","Date","create_at","toLocaleDateString","isPublic","ref","is-new","isNew","tempArticle","updateArticle","item","deleteArticle","props-article","tabindex","aria-labelledby","aria-hidden","data-bs-dismiss","aria-label","for","imageUrl","placeholder","src","uploadImage","Array","isArray","imagesUrl","image","index","length","push","pop","removeImages","tag","content","rows","description","editor","config","editorConfig","true-value","false-value","$emit","props","data","articleModal","editorData","heading","options","model","view","language","mounted","this","$refs","watch","methods","showModal","show","hideModal","hide","fileInput","document","querySelector","file","files","formData","FormData","append","url","$http","post","then","res","success","tempProduct","value","catch","err","console","log","render","propsArticle","alt","previwModal","previewModal","inject","components","ArticleModal","DelModal","PreviewModal","created","getArticles","page","get","alert","messages","join","Math","floor","now","emitter","emit","style","message","put","delete"],"mappings":"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","file":"js/chunk-2d22db6b.7537a0e5.js","sourcesContent":["<template>\n    <div>\n    <Loading :active=\"isLoading\"></Loading>\n    <button\n    type=\"button\"\n    class=\"btn btn-primary my-3\"\n    @click=\"openModal('new')\"\n    >\n    新增文章\n    </button>\n    <div class=\"table-responsive\">\n      <table class=\"table align-middle text-center\">\n        <thead>\n          <tr>\n            <th width=\"20%\">標題</th>\n            <th width=\"25%\">簡介</th>\n            <th width=\"10%\">作者</th>\n            <th width=\"15%\">日期</th>\n            <th width=\"10%\">是否公開</th>\n            <th></th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"article in articles\" :key=\"article.id\">\n            <td>{{ article.title }}</td>\n            <td >\n              <a href=\"#\"\n              ata-bs-toggle=\"PreviewModal\"\n              data-bs-target=\"#PreviewModal\"\n              @click.prevent=\"openModal('preview', article)\">預覽內容</a>\n            </td>\n            <td>{{ article.author }}</td>\n            <td>{{ new Date(article.create_at * 1000).toLocaleDateString() }}</td>\n            <td>\n              <span :class=\"{ 'text-success': article.isPublic }\"\n              v-if=\"article.isPublic\">發布</span>\n              <span :class=\"{ 'text-danger': !article.isPublic }\"\n              v-if=\"!article.isPublic\">未發布</span>\n            </td>\n            <td>\n              <div class=\"btn-group\">\n                <button type=\"button\"\n                class=\"btn btn-sm btn-outline-primary\"\n                @click=\"openModal('edit', article)\"\n                >編輯</button>\n                <button type=\"button\"\n                class=\"btn btn-sm btn-outline-danger\"\n                @click=\"openModal('delete', article)\"\n                >刪除</button>\n              </div>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n\n  <ArticleModal\n  id=\"ArticleModal\"\n  ref=\"ArticleModal\"\n  :is-new=\"isNew\"\n  :article=\"tempArticle\"\n  @update-article=\"updateArticle\"\n  ></ArticleModal>\n\n  <DelModal\n  id=\"DelModal\"\n  ref=\"DelModal\"\n  :item=\"tempArticle\"\n  @delete=\"deleteArticle\"></DelModal>\n\n  <PreviewModal\n  ref=\"PreviewModal\"\n  id=\"PreviewModal\"\n  :props-article=\"tempArticle\"\n  ></PreviewModal>\n</template>\n\n<script>\nimport ArticleModal from '@/components/admin/ArticleModal.vue';\nimport PreviewModal from '@/components/admin/PreviewModal.vue';\nimport DelModal from '@/components/DelModal.vue';\n\nexport default {\n  data() {\n    return {\n      isLoading: false,\n      articles: [],\n      isNew: false,\n      tempArticle: {\n        tag: [],\n        imagesUrl: [],\n      },\n    };\n  },\n  inject: ['emitter'],\n  components: {\n    ArticleModal,\n    DelModal,\n    PreviewModal,\n  },\n  created() {\n    this.getArticles();\n  },\n  methods: {\n    getArticles(page = 1) {\n      this.isLoading = true;\n      const url = `${process.env.VUE_APP_URL}/api/${process.env.VUE_APP_PATH}/admin/articles?page=${page}`;\n      this.$http.get(url).then((res) => {\n        if (res.data.success) {\n          console.log(res);\n          this.articles = res.data.articles;\n          this.isLoading = false;\n        } else {\n          // eslint-disable-next-line no-alert\n          alert(res.data.messages.join(','));\n        }\n      }).catch((err) => {\n        console.log(err);\n      });\n    },\n    openModal(isNew, article) {\n      switch (isNew) {\n        case 'new':\n          this.isNew = true;\n          this.tempArticle = {\n            create_at: Math.floor(Date.now() / 1000),\n            isPublic: false,\n            tag: [],\n            imagesUrl: [],\n          };\n          this.$refs.ArticleModal.showModal();\n          break;\n        case 'edit':\n          this.isNew = false;\n          console.log(article);\n          this.tempArticle = {\n            imagesUrl: [],\n            ...article,\n            content: '新品文章',\n          };\n          this.$refs.ArticleModal.showModal();\n          break;\n        case 'delete':\n          this.tempArticle = { ...article };\n          this.$refs.DelModal.showModal();\n          break;\n        case 'preview':\n          this.tempArticle = { ...article };\n          this.$refs.PreviewModal.showModal();\n          break;\n        default:\n          break;\n      }\n    },\n    updateArticle(tempArticle) {\n      // ! 新增\n      if (this.isNew === true) {\n        const url = `${process.env.VUE_APP_URL}/api/${process.env.VUE_APP_PATH}/admin/article`;\n        this.$http.post(url, { data: tempArticle }).then((res) => {\n          if (res.data.success) {\n            this.getArticles();\n            this.emitter.emit('push-message', {\n              style: 'success',\n              title: res.data.message,\n            });\n            this.$refs.ArticleModal.hideModal();\n          } else {\n            this.emitter.emit('push-message', {\n              style: 'danger',\n              title: '新增失敗',\n              content: res.data.message.join('、'),\n            });\n          }\n        }).catch((err) => {\n          console.log(err);\n        });\n      } else {\n        // ! 編輯\n        const url = `${process.env.VUE_APP_URL}/api/${process.env.VUE_APP_PATH}/admin/article/${tempArticle.id}`;\n        this.$http.put(url, { data: tempArticle }).then((res) => {\n          if (res.data.success) {\n            this.emitter.emit('push-message', {\n              style: 'success',\n              title: `${res.data.message}`,\n            });\n            this.getArticles();\n            this.$refs.ArticleModal.hideModal();\n          } else {\n            this.emitter.emit('push-message', {\n              style: 'danger',\n              title: `${tempArticle.title}更新失敗`,\n              content: res.data.message.join('、'),\n            });\n          }\n        }).catch((err) => {\n          console.log(err);\n        });\n      }\n    },\n    deleteArticle(tempArticle) {\n      const url = `${process.env.VUE_APP_URL}/api/${process.env.VUE_APP_PATH}/admin/article/${tempArticle.id}`;\n      this.$http.delete(url).then((res) => {\n        if (res.data.success) {\n          this.emitter.emit('push-message', {\n            style: 'success',\n            title: res.data.message,\n          });\n          this.getArticles();\n          this.$refs.DelModal.hideModal();\n        } else {\n          this.emitter.emit('push-message', {\n            style: 'danger',\n            title: res.data.message,\n          });\n        }\n      });\n    },\n  },\n};\n</script>\n","<template>\n  <div class=\"modal fade\" id=\"articleModal\"\n  ref=\"articleModal\"\n  tabindex=\"-1\" aria-labelledby=\"articleModalLabel\" aria-hidden=\"true\">\n    <div class=\"modal-dialog modal-xl\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header bg-dark text-white\">\n          <h5 class=\"modal-title\" id=\"articleModalLabel\">{{ isNew ? '新增文章' : '編輯文章' }}</h5>\n          <button type=\"button\"\n          class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n        </div>\n        <div class=\"modal-body\">\n          <div class=\"row\">\n            <!-- ? 圖片新增 -->\n            <div class=\"col-sm-4\">\n                <div class=\"mb-1\">\n                  <div class=\"form-group\">\n                      <label for=\"imageUrl\" class=\"fw-bold\">主要圖片</label>\n                      <input\n                      v-model=\"tempArticle.imageUrl\" type=\"text\"\n                      class=\"form-control\"\n                      placeholder=\"請輸入圖片連結\">\n                  </div>\n                  <img class=\"img-fluid\" :src=\"tempArticle.imageUrl\">\n                </div>\n                <div class=\"form-group mb-3\">\n                    <label for=\"photoFile\" class=\"fw-bold\">上傳圖片檔案</label>\n                    <input type=\"file\"\n                    id=\"photoFile\"\n                    class=\"form-control\" placeholder=\"請輸入圖片路徑\"\n                    @change=\"uploadImage\">\n                </div>\n                <hr>\n                <!-- ? 多圖 -->\n                <div class=\"mb-1 fw-bold\">其他圖片</div>\n                <div v-if=\"Array.isArray(tempArticle.imagesUrl)\">\n                    <div class=\"mb-1\" v-for=\"(image, index) in tempArticle.imagesUrl\" :key=\"index\">\n                        <label for=\"imageUrl\">圖片網址</label>\n                        <input\n                        v-model=\"tempArticle.imagesUrl[index]\"\n                        type=\"text\"\n                        class=\"form-control\"\n                        placeholder=\"請輸入圖片連結\">\n                        <img :src=\"tempArticle.imagesUrl[index]\" class=\"img-fluid\">\n                    </div>\n                    <div\n                    v-if=\"!tempArticle.imagesUrl.length ||\n                    tempArticle.imagesUrl[tempArticle.imagesUrl.length - 1]\">\n                        <button\n                        class=\"btn btn-outline-primary btn-sm d-block w-100\"\n                        @click=\"tempArticle.imagesUrl.push('')\">\n                            新增圖片\n                        </button>\n                    </div>\n                    <div v-else>\n                        <button\n                        class=\"btn btn-outline-danger btn-sm d-block w-100\"\n                        @click=\"tempArticle.imagesUrl.pop()\">\n                            刪除空白圖片網址\n                        </button>\n                    </div>\n                </div>\n                <div class=\"mt-2\">\n                    <button\n                    class=\"btn btn-sm btn-danger d-block w-100\"\n                    @click=\"removeImages()\">刪除圖片</button>\n                </div>\n            </div>\n            <div class=\"col-sm-8\">\n              <div class=\"form-group\">\n                  <label for=\"title\">標題</label>\n                  <input v-model=\"tempArticle.title\" id=\"title\"\n                  type=\"text\"\n                  class=\"form-control\"\n                  placeholder=\"請輸入標題\">\n              </div>\n                <div class=\"form-group mb-3\">\n                  <label for=\"category\">作者</label>\n                  <input\n                    v-model=\"tempArticle.author\"\n                    id=\"category\"\n                    type=\"text\"\n                    class=\"form-control\"\n                    placeholder=\"請輸入您的大名\"\n                  />\n                </div>\n                <!-- 標籤比較難處理，不過與圖片新增大同小異，且不是一定要提供的 -->\n                <div class=\"form-group\">\n                    <div class=\"mb-1\" v-for=\"(item, index) in tempArticle.tag\" :key=\"index\">\n                        <label for=\"tag\">標籤{{ index + 1 }}</label>\n                        <input\n                        v-model=\"tempArticle.tag[index]\"\n                        type=\"text\"\n                        class=\"form-control\"\n                        placeholder=\"請輸入標籤名稱\">\n                    </div>\n                    <div class=\"btn-group w-100\">\n                      <button\n                        class=\"btn btn-outline-primary btn-sm d-block w-100\"\n                        @click=\"tempArticle.tag.push('')\">\n                          加入標籤\n                      </button>\n                      <button\n                        class=\"btn btn-outline-danger btn-sm d-block w-100\"\n                        @click=\"tempArticle.tag.pop()\">\n                            刪除標籤\n                      </button>\n\n                    </div>\n                </div>\n                <hr>\n                <div class=\"form-group mb-3\">\n                    <label for=\"content\">文章類別</label>\n                    <textarea\n                    v-model=\"tempArticle.content\"\n                    id=\"content\" type=\"text\"\n                    class=\"form-control\"\n                    placeholder=\"請輸入文章類別\"\n                    rows=\"1\"\n                    >\n                    </textarea>\n                </div>\n                <div class=\"form-group mb-3\">\n                    <label for=\"description\">文章內容</label><br>\n                    <!-- <textarea v-model=\"tempArticle.description\" id=\"description\" type=\"text\"\n                    class=\"form-control\" placeholder=\"請撰寫內文\"\n                    rows=\"10\"\n                    ></textarea> -->\n                    <p v-html=\"tempArticle.description\"></p>\n                    <ckeditor :editor=\"editor\"\n                    v-model=\"tempArticle.description\"\n                    :config=\"editorConfig\"\n                    ></ckeditor>\n                </div>\n                <div class=\"form-group\">\n                    <div class=\"form-check\">\n                        <input v-model=\"tempArticle.isPublic\"\n                        id=\"isPublic\" class=\"form-check-input\"\n                        type=\"checkbox\" :true-value=\"true\" :false-value=\"false\">\n                        <label class=\"form-check-label\" for=\"isPublic\">是否發布</label>\n                    </div>\n                </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">取消</button>\n            <button type=\"button\"\n            class=\"btn btn-primary\"\n            @click=\"$emit('update-article', tempArticle)\"\n            >確認</button>\n          </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { Modal } from 'bootstrap';\nimport ClassicEditor from '@ckeditor/ckeditor5-build-classic';\n\nexport default {\n  props: ['article', 'isNew'],\n  data() {\n    return {\n      articleModal: {},\n      tempArticle: {},\n      editor: ClassicEditor,\n      editorData: '<p>Content of the editor.</p>',\n      editorConfig: {\n        // 刪除工具列的功能\n        placeholder: '請輸入文章...',\n        // 初始化載入文字\n        heading: {\n        // 設定 Heading 內的樣式，可新增多個\n          options: [\n            {\n              model: 'paragraph',\n              title: 'Paragraph',\n              class: 'ck-heading_paragraph',\n            },\n            {\n              model: 'heading1',\n              view: 'h2',\n              title: 'Heading 1',\n              class: 'ck-heading_heading1',\n            },\n            {\n              model: 'heading2',\n              view: 'h3',\n              title: 'Heading 2',\n              class: 'ck-heading_heading2',\n            },\n          ],\n        },\n        language: 'tw',\n        // 設定語言\n      },\n    };\n  },\n  mounted() {\n    this.articleModal = new Modal(this.$refs.articleModal);\n  },\n  watch: {\n    article() {\n      this.tempArticle = this.article;\n    },\n  },\n  methods: {\n    showModal() {\n      this.articleModal.show();\n    },\n    hideModal() {\n      this.articleModal.hide();\n    },\n    uploadImage() {\n      // ! DOM要放在子元件內才找的到\n      const fileInput = document.querySelector('#photoFile');\n      // 取出fileInput中的相片檔案\n      const file = fileInput.files[0];\n      // 格式轉換：使用formData格式來上傳\n      const formData = new FormData();\n      // 新增欄位file-to-upload\n      formData.append('file-to-upload', file);\n      const url = `${process.env.VUE_APP_URL}/api/${process.env.VUE_APP_PATH}/admin/upload`;\n      this.$http.post(url, formData).then((res) => {\n        if (res.data.success) {\n          // ! 判斷tempProduct.imageUrl是否存在，不存在就加入倒imageUrl(單張)，存在新增到陣列imagesUrl中\n          if (!this.tempProduct.imageUrl) {\n            this.tempArticle.imageUrl = res.data.imageUrl;\n          } else {\n            this.tempArticle.imagesUrl.push(res.data.imageUrl);\n          }\n          // 加入傳上圖片就清空value文字\n          fileInput.value = '';\n        }\n      }).catch((err) => {\n        console.log(err);\n      });\n    },\n    removeImages() {\n      if (this.tempArticle.imagesUrl.length) {\n        this.tempArticle.imagesUrl.pop();\n      } else {\n        this.tempArticle.imageUrl = '';\n      }\n    },\n  },\n};\n</script>\n","import { render } from \"./ArticleModal.vue?vue&type=template&id=07d60066\"\nimport script from \"./ArticleModal.vue?vue&type=script&lang=js\"\nexport * from \"./ArticleModal.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\n  <div class=\"modal\" tabindex=\"-1\"\n  ref=\"previewModal\"\n  id=\"previewModal\"\n  >\n    <div class=\"modal-dialog modal-lg\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h5>文章預覽</h5>\n          <button type=\"button\"\n          class=\"btn-close\"\n          data-bs-dismiss=\"modal\"\n          aria-label=\"Close\"></button>\n        </div>\n        <div class=\"modal-body\">\n          <div class=\"d-flex justify-content-between mb-3\">\n            <small class=\"text-muted\">made by {{ propsArticle.author }}</small>\n            <small class=\"text-muted\">\n              更新日期：{{ new Date(propsArticle.create_at * 1000).toLocaleDateString() }}\n            </small>\n          </div>\n          <h2 class=\"text-center\">{{ propsArticle.title }}</h2>\n          <img :src=\"propsArticle.imageUrl\"\n          alt=\"文章相片\" class=\"d-block mx-auto img-fluid mb-3\">\n          <p v-html=\"propsArticle.description\"></p>\n        </div>\n        <div class=\"modal-footer\">\n          <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Close</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { Modal } from 'bootstrap';\n\nexport default {\n  props: ['propsArticle'],\n  data() {\n    return {\n      previwModal: {},\n      article: {},\n    };\n  },\n  mounted() {\n    this.previewModal = new Modal(this.$refs.previewModal);\n  },\n  methods: {\n    showModal() {\n      this.previewModal.show();\n    },\n    hideModal() {\n      this.previewModal.hide();\n    },\n  },\n};\n</script>\n","import { render } from \"./PreviewModal.vue?vue&type=template&id=6b6cb6dc\"\nimport script from \"./PreviewModal.vue?vue&type=script&lang=js\"\nexport * from \"./PreviewModal.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./Article.vue?vue&type=template&id=3202df2b\"\nimport script from \"./Article.vue?vue&type=script&lang=js\"\nexport * from \"./Article.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}