(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d22db6b"],{f957:function(e,t,c){"use strict";c.r(t);var a=c("7a23"),o={class:"table-responsive"},l={class:"table align-middle text-center"},r=Object(a["createVNode"])("thead",null,[Object(a["createVNode"])("tr",null,[Object(a["createVNode"])("th",{width:"20%"},"標題"),Object(a["createVNode"])("th",{width:"25%"},"簡介"),Object(a["createVNode"])("th",{width:"10%"},"作者"),Object(a["createVNode"])("th",{width:"15%"},"日期"),Object(a["createVNode"])("th",{width:"10%"},"是否公開"),Object(a["createVNode"])("th")])],-1),i={class:"btn-group"};function n(e,t,c,n,s,d){var b=Object(a["resolveComponent"])("Loading"),u=Object(a["resolveComponent"])("ArticleModal"),p=Object(a["resolveComponent"])("DelModal"),m=Object(a["resolveComponent"])("PreviewModal");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[Object(a["createVNode"])("div",null,[Object(a["createVNode"])(b,{active:s.isLoading},null,8,["active"]),Object(a["createVNode"])("button",{type:"button",class:"btn btn-primary my-3",onClick:t[1]||(t[1]=function(e){return d.openModal("new")})}," 新增文章 "),Object(a["createVNode"])("div",o,[Object(a["createVNode"])("table",l,[r,Object(a["createVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(s.articles,(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])("tr",{key:e.id},[Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(e.title),1),Object(a["createVNode"])("td",null,[Object(a["createVNode"])("a",{href:"#","ata-bs-toggle":"PreviewModal","data-bs-target":"#PreviewModal",onClick:Object(a["withModifiers"])((function(t){return d.openModal("preview",e)}),["prevent"])},"預覽內容",8,["onClick"])]),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(e.author),1),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(new Date(1e3*e.create_at).toLocaleDateString()),1),Object(a["createVNode"])("td",null,[e.isPublic?(Object(a["openBlock"])(),Object(a["createBlock"])("span",{key:0,class:{"text-success":e.isPublic}},"發布",2)):Object(a["createCommentVNode"])("",!0),e.isPublic?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createBlock"])("span",{key:1,class:{"text-danger":!e.isPublic}},"未發布",2))]),Object(a["createVNode"])("td",null,[Object(a["createVNode"])("div",i,[Object(a["createVNode"])("button",{type:"button",class:"btn btn-sm btn-outline-primary",onClick:function(t){return d.openModal("edit",e)}},"編輯",8,["onClick"]),Object(a["createVNode"])("button",{type:"button",class:"btn btn-sm btn-outline-danger",onClick:function(t){return d.openModal("delete",e)}},"刪除",8,["onClick"])])])])})),128))])])])]),Object(a["createVNode"])(u,{id:"ArticleModal",ref:"ArticleModal","is-new":s.isNew,article:s.tempArticle,onUpdateArticle:d.updateArticle},null,8,["is-new","article","onUpdateArticle"]),Object(a["createVNode"])(p,{id:"DelModal",ref:"DelModal",item:s.tempArticle,onDelete:d.deleteArticle},null,8,["item","onDelete"]),Object(a["createVNode"])(m,{ref:"PreviewModal",id:"PreviewModal","props-article":s.tempArticle},null,8,["props-article"])],64)}var s=c("5530"),d=(c("99af"),c("a15b"),c("a4d3"),c("e01a"),{class:"modal fade",id:"articleModal",ref:"articleModal",tabindex:"-1","aria-labelledby":"articleModalLabel","aria-hidden":"true"}),b={class:"modal-dialog modal-xl"},u={class:"modal-content"},p={class:"modal-header bg-dark text-white"},m={class:"modal-title",id:"articleModalLabel"},h=Object(a["createVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),j={class:"modal-body"},O={class:"row"},g={class:"col-sm-4"},f={class:"mb-1"},V={class:"form-group"},v=Object(a["createVNode"])("label",{for:"imageUrl",class:"fw-bold"},"主要圖片",-1),N={class:"form-group mb-3"},w=Object(a["createVNode"])("label",{for:"photoFile",class:"fw-bold"},"上傳圖片檔案",-1),k=Object(a["createVNode"])("hr",null,null,-1),A=Object(a["createVNode"])("div",{class:"mb-1 fw-bold"},"其他圖片",-1),M={key:0},y=Object(a["createVNode"])("label",{for:"imageUrl"},"圖片網址",-1),U={key:0},x={key:1},D={class:"mt-2"},C={class:"col-sm-8"},B={class:"form-group"},P=Object(a["createVNode"])("label",{for:"title"},"標題",-1),L={class:"form-group mb-3"},$=Object(a["createVNode"])("label",{for:"category"},"作者",-1),S={class:"form-group"},T={for:"tag"},F={class:"btn-group w-100"},H=Object(a["createVNode"])("hr",null,null,-1),_={class:"form-group mb-3"},I=Object(a["createVNode"])("label",{for:"content"},"文章類別",-1),J={class:"form-group mb-3"},q=Object(a["createVNode"])("label",{for:"description"},"文章內容",-1),z=Object(a["createVNode"])("br",null,null,-1),E={class:"form-group"},G={class:"form-check"},K=Object(a["createVNode"])("label",{class:"form-check-label",for:"isPublic"},"是否發布",-1),Q={class:"modal-footer"},R=Object(a["createVNode"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"取消",-1);function W(e,t,c,o,l,r){var i=Object(a["resolveComponent"])("ckeditor");return Object(a["openBlock"])(),Object(a["createBlock"])("div",d,[Object(a["createVNode"])("div",b,[Object(a["createVNode"])("div",u,[Object(a["createVNode"])("div",p,[Object(a["createVNode"])("h5",m,Object(a["toDisplayString"])(c.isNew?"新增文章":"編輯文章"),1),h]),Object(a["createVNode"])("div",j,[Object(a["createVNode"])("div",O,[Object(a["createVNode"])("div",g,[Object(a["createVNode"])("div",f,[Object(a["createVNode"])("div",V,[v,Object(a["withDirectives"])(Object(a["createVNode"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return l.tempArticle.imageUrl=e}),type:"text",class:"form-control",placeholder:"請輸入圖片連結"},null,512),[[a["vModelText"],l.tempArticle.imageUrl]])]),Object(a["createVNode"])("img",{class:"img-fluid",src:l.tempArticle.imageUrl},null,8,["src"])]),Object(a["createVNode"])("div",N,[w,Object(a["createVNode"])("input",{type:"file",id:"photoFile",class:"form-control",placeholder:"請輸入圖片路徑",onChange:t[2]||(t[2]=function(){return r.uploadImage&&r.uploadImage.apply(r,arguments)})},null,32)]),k,A,Array.isArray(l.tempArticle.imagesUrl)?(Object(a["openBlock"])(),Object(a["createBlock"])("div",M,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(l.tempArticle.imagesUrl,(function(e,t){return Object(a["openBlock"])(),Object(a["createBlock"])("div",{class:"mb-1",key:t},[y,Object(a["withDirectives"])(Object(a["createVNode"])("input",{"onUpdate:modelValue":function(e){return l.tempArticle.imagesUrl[t]=e},type:"text",class:"form-control",placeholder:"請輸入圖片連結"},null,8,["onUpdate:modelValue"]),[[a["vModelText"],l.tempArticle.imagesUrl[t]]]),Object(a["createVNode"])("img",{src:l.tempArticle.imagesUrl[t],class:"img-fluid"},null,8,["src"])])})),128)),!l.tempArticle.imagesUrl.length||l.tempArticle.imagesUrl[l.tempArticle.imagesUrl.length-1]?(Object(a["openBlock"])(),Object(a["createBlock"])("div",U,[Object(a["createVNode"])("button",{class:"btn btn-outline-primary btn-sm d-block w-100",onClick:t[3]||(t[3]=function(e){return l.tempArticle.imagesUrl.push("")})}," 新增圖片 ")])):(Object(a["openBlock"])(),Object(a["createBlock"])("div",x,[Object(a["createVNode"])("button",{class:"btn btn-outline-danger btn-sm d-block w-100",onClick:t[4]||(t[4]=function(e){return l.tempArticle.imagesUrl.pop()})}," 刪除空白圖片網址 ")]))])):Object(a["createCommentVNode"])("",!0),Object(a["createVNode"])("div",D,[Object(a["createVNode"])("button",{class:"btn btn-sm btn-danger d-block w-100",onClick:t[5]||(t[5]=function(e){return r.removeImages()})},"刪除圖片")])]),Object(a["createVNode"])("div",C,[Object(a["createVNode"])("div",B,[P,Object(a["withDirectives"])(Object(a["createVNode"])("input",{"onUpdate:modelValue":t[6]||(t[6]=function(e){return l.tempArticle.title=e}),id:"title",type:"text",class:"form-control",placeholder:"請輸入標題"},null,512),[[a["vModelText"],l.tempArticle.title]])]),Object(a["createVNode"])("div",L,[$,Object(a["withDirectives"])(Object(a["createVNode"])("input",{"onUpdate:modelValue":t[7]||(t[7]=function(e){return l.tempArticle.author=e}),id:"category",type:"text",class:"form-control",placeholder:"請輸入您的大名"},null,512),[[a["vModelText"],l.tempArticle.author]])]),Object(a["createVNode"])("div",S,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(l.tempArticle.tag,(function(e,t){return Object(a["openBlock"])(),Object(a["createBlock"])("div",{class:"mb-1",key:t},[Object(a["createVNode"])("label",T,"標籤"+Object(a["toDisplayString"])(t+1),1),Object(a["withDirectives"])(Object(a["createVNode"])("input",{"onUpdate:modelValue":function(e){return l.tempArticle.tag[t]=e},type:"text",class:"form-control",placeholder:"請輸入標籤名稱"},null,8,["onUpdate:modelValue"]),[[a["vModelText"],l.tempArticle.tag[t]]])])})),128)),Object(a["createVNode"])("div",F,[Object(a["createVNode"])("button",{class:"btn btn-outline-primary btn-sm d-block w-100",onClick:t[8]||(t[8]=function(e){return l.tempArticle.tag.push("")})}," 加入標籤 "),Object(a["createVNode"])("button",{class:"btn btn-outline-danger btn-sm d-block w-100",onClick:t[9]||(t[9]=function(e){return l.tempArticle.tag.pop()})}," 刪除標籤 ")])]),H,Object(a["createVNode"])("div",_,[I,Object(a["withDirectives"])(Object(a["createVNode"])("textarea",{"onUpdate:modelValue":t[10]||(t[10]=function(e){return l.tempArticle.content=e}),id:"content",type:"text",class:"form-control",placeholder:"請輸入文章類別",rows:"1"},"\n                    ",512),[[a["vModelText"],l.tempArticle.content]])]),Object(a["createVNode"])("div",J,[q,z,Object(a["createVNode"])("p",{innerHTML:l.tempArticle.description},null,8,["innerHTML"]),Object(a["createVNode"])(i,{editor:l.editor,modelValue:l.tempArticle.description,"onUpdate:modelValue":t[11]||(t[11]=function(e){return l.tempArticle.description=e}),config:l.editorConfig},null,8,["editor","modelValue","config"])]),Object(a["createVNode"])("div",E,[Object(a["createVNode"])("div",G,[Object(a["withDirectives"])(Object(a["createVNode"])("input",{"onUpdate:modelValue":t[12]||(t[12]=function(e){return l.tempArticle.isPublic=e}),id:"isPublic",class:"form-check-input",type:"checkbox","true-value":!0,"false-value":!1},null,512),[[a["vModelCheckbox"],l.tempArticle.isPublic]]),K])])])])]),Object(a["createVNode"])("div",Q,[R,Object(a["createVNode"])("button",{type:"button",class:"btn btn-primary",onClick:t[13]||(t[13]=function(t){return e.$emit("update-article",l.tempArticle)})},"確認")])])])],512)}var X=c("7b17"),Y=c("fb3d"),Z=c.n(Y),ee={props:["article","isNew"],data:function(){return{articleModal:{},tempArticle:{},editor:Z.a,editorData:"<p>Content of the editor.</p>",editorConfig:{placeholder:"請輸入文章...",initialData:"<h2>我是預設字串</h2>",heading:{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h2",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h3",title:"Heading 2",class:"ck-heading_heading2"}]},language:"tw"}}},mounted:function(){this.articleModal=new X["a"](this.$refs.articleModal)},watch:{article:function(){this.tempArticle=this.article}},methods:{showModal:function(){this.articleModal.show()},hideModal:function(){this.articleModal.hide()},uploadImage:function(){var e=this,t=document.querySelector("#photoFile"),c=t.files[0],a=new FormData;a.append("file-to-upload",c);var o="".concat("https://vue3-course-api.hexschool.io","/api/").concat("larry","/admin/upload");this.$http.post(o,a).then((function(c){c.data.success&&(e.tempProduct.imageUrl?e.tempArticle.imagesUrl.push(c.data.imageUrl):e.tempArticle.imageUrl=c.data.imageUrl,t.value="")})).catch((function(e){console.log(e)}))},removeImages:function(){this.tempArticle.imagesUrl.length?this.tempArticle.imagesUrl.pop():this.tempArticle.imageUrl=""}}};ee.render=W;var te=ee,ce={class:"modal",tabindex:"-1",ref:"previewModal",id:"previewModal"},ae={class:"modal-dialog modal-lg"},oe={class:"modal-content"},le=Object(a["createVNode"])("div",{class:"modal-header"},[Object(a["createVNode"])("h5",null,"文章預覽"),Object(a["createVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),re={class:"modal-body"},ie={class:"d-flex justify-content-between mb-3"},ne={class:"text-muted"},se={class:"text-muted"},de={class:"text-center"},be=Object(a["createVNode"])("div",{class:"modal-footer"},[Object(a["createVNode"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close")],-1);function ue(e,t,c,o,l,r){return Object(a["openBlock"])(),Object(a["createBlock"])("div",ce,[Object(a["createVNode"])("div",ae,[Object(a["createVNode"])("div",oe,[le,Object(a["createVNode"])("div",re,[Object(a["createVNode"])("div",ie,[Object(a["createVNode"])("small",ne,"made by "+Object(a["toDisplayString"])(c.propsArticle.author),1),Object(a["createVNode"])("small",se," 更新日期："+Object(a["toDisplayString"])(new Date(1e3*c.propsArticle.create_at).toLocaleDateString()),1)]),Object(a["createVNode"])("h2",de,Object(a["toDisplayString"])(c.propsArticle.title),1),Object(a["createVNode"])("img",{src:c.propsArticle.imageUrl,alt:"文章相片",class:"d-block mx-auto img-fluid mb-3"},null,8,["src"]),Object(a["createVNode"])("p",{innerHTML:c.propsArticle.description},null,8,["innerHTML"])]),be])])],512)}var pe={props:["propsArticle"],data:function(){return{previwModal:{},article:{}}},mounted:function(){this.previewModal=new X["a"](this.$refs.previewModal)},methods:{showModal:function(){this.previewModal.show()},hideModal:function(){this.previewModal.hide()}}};pe.render=ue;var me=pe,he=c("6ff1"),je={data:function(){return{isLoading:!1,articles:[],isNew:!1,tempArticle:{tag:[],imagesUrl:[]}}},inject:["emitter"],components:{ArticleModal:te,DelModal:he["a"],PreviewModal:me},created:function(){this.getArticles()},methods:{getArticles:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("larry","/admin/articles?page=").concat(t);this.$http.get(c).then((function(t){t.data.success?(console.log(t),e.articles=t.data.articles,e.isLoading=!1):alert(t.data.messages.join(","))})).catch((function(e){console.log(e)}))},openModal:function(e,t){switch(e){case"new":this.isNew=!0,this.tempArticle={create_at:Math.floor(Date.now()/1e3),isPublic:!1,tag:[],imagesUrl:[]},this.$refs.ArticleModal.showModal();break;case"edit":this.isNew=!1,console.log(t),this.tempArticle=Object(s["a"])(Object(s["a"])({imagesUrl:[]},t),{},{content:"新品文章"}),this.$refs.ArticleModal.showModal();break;case"delete":this.tempArticle=Object(s["a"])({},t),this.$refs.DelModal.showModal();break;case"preview":this.tempArticle=Object(s["a"])({},t),this.$refs.PreviewModal.showModal();break;default:break}},updateArticle:function(e){var t=this;if(!0===this.isNew){var c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("larry","/admin/article");this.$http.post(c,{data:e}).then((function(e){e.data.success?(t.getArticles(),t.emitter.emit("push-message",{style:"success",title:e.data.message}),t.$refs.ArticleModal.hideModal()):t.emitter.emit("push-message",{style:"danger",title:"新增失敗",content:e.data.message.join("、")})})).catch((function(e){console.log(e)}))}else{var a="".concat("https://vue3-course-api.hexschool.io","/api/").concat("larry","/admin/article/").concat(e.id);this.$http.put(a,{data:e}).then((function(c){c.data.success?(t.emitter.emit("push-message",{style:"success",title:"".concat(c.data.message)}),t.getArticles(),t.$refs.ArticleModal.hideModal()):t.emitter.emit("push-message",{style:"danger",title:"".concat(e.title,"更新失敗"),content:c.data.message.join("、")})})).catch((function(e){console.log(e)}))}},deleteArticle:function(e){var t=this,c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("larry","/admin/article/").concat(e.id);this.$http.delete(c).then((function(e){e.data.success?(t.emitter.emit("push-message",{style:"success",title:e.data.message}),t.getArticles(),t.$refs.DelModal.hideModal()):t.emitter.emit("push-message",{style:"danger",title:e.data.message})}))}}};je.render=n;t["default"]=je}}]);
//# sourceMappingURL=chunk-2d22db6b.b8980b24.js.map